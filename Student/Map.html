<html>
    <head>
        <style>
            #Map{
                width: 100%;
                height: 80%;
            }
            .template{
                display: none;
            }
            #ReservationButton{
                top: -100px;
            }
        </style>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d2481bf8dd089370ad295dd73d94a65a"></script>
        <script src="../src/JQuery.js"></script>
        <script src="../src/Map.js"></script>
        <script>
            var stat = top.args["stat"];
            var role = top.args["role"];
            $(document).ready(function(){
                $("#ReservationButton").on("click", function(){
                    if(!top.debugging){
                        $.ajax({
                            url: "http://smartku.bingha.me/php/reservation-post.php",
                            type: "POST",
                            data: {
                                "fromlat" : from["lat"],
                                "fromlng" : from["lng"],
                                "tolat" : to["lat"],
                                "tolng" : to["lng"],
                                "id" : top.args["id"]
                            },
                            error: function(jqXHR, textStatus, errorThrown){
                                alert("failed");
                            },
                            success: function(data, status, xhr){
                                top.args["from"] = from;
                                top.args["to"] = to;
                                window.location.href ="Reservation-calling.html";
                            }
                        });
                    } else {
                        top.args["from"] = from;
                        top.args["to"] = to;
                        window.location.href ="Reservation-calling.html";
                    }
                });
                
                StartMap();
                if(stat == "reserving"){
                    RecordPositionGet();

                } else if (stat == "wating") {
                    setInterval(DriverPositionGet, 1000);
                }
            });
        </script>
    </head>

    <body>
        <div id="InfowindowTemplete" class="template">
            <div id="PositionName"></div>
            <div id="ButtonLatitude" class="template"></div>
            <div id="ButtonLongtitude" class="template" ></div>
        </div>
        <button id="GetLocation" class="template">어디서 참여하고 있지요?</button>
        <div id="SetLocation" class="template"></div>
        <div id="MapExplanation">
            <div id="MapStartOrDest">출발지</div>를 선택하세요
        </div>
        <div id="Map"></div>
        <div id="menu">
            <button id="ReservationButton"> 이자리에서 예약</button>
        </div>
    </body>
</html>